# External Context Engine Configuration

# Orchestrator configuration
orchestrator:
  # Decision tree for routing tasks to appropriate agents
  decision_tree:
    # Intents and their corresponding agents
    intents:
      # This intent is now more specific and will be checked first.
      parallel_thinking:
        agent: ThinkerAgent # This keyword maps to the parallel thinking workflow
        keywords:
          - analyze the strengths and weaknesses
          - compare and contrast
          - debate the pros and cons
          - provide multiple perspectives on
          - evaluate the differences between
      web_search:
        agent: WebSearchAgent
        keywords:
          - search
          - find
          - lookup
          - research
          - google
      multi_modal_processing:
        agent: MultiModalIngestionAgent
        keywords:
          - image
          - video
          - document
          - pdf
          - media
      coherence_check:
        agent: CoherenceAgent
        keywords:
          - coherence
          - consistency
          - flow
          - readability
      safety_check:
        agent: SafetyAgent
        keywords:
          - safety
          - appropriate
          - filter
          - moderation
      distill_text:
        agent: DistillerAgent
        keywords:
          - distill
          - extract
          - entities
          - relationships
          - structure
          - summarize
      extract_information:
        agent: ExtractorAgent
        # "analyze" has been removed to avoid conflict with parallel thinking.
        keywords:
          - extract the information
          - get the data from
          - parse the contents of
      inject_context:
        agent: InjectorAgent
        keywords:
          - inject
          - insert
          - add to knowledge base
          - integrate
          - incorporate
      archive_memory:
        agent: ArchivistAgent
        keywords:
          - archive
          - store
          - memory
          - persist
          - save
      find_path:
        agent: QLearningGraphAgent
        keywords:
          - find path
          - reason
          - traverse graph
          - navigate
          - path finding
      cache_operation:
        agent: CacheManager
        keywords:
          - cache
          - retrieve
          - store in cache
          - cached
          - memory cache

      exploratory_problem_solving:
        agent: ExploratoryAgent
        keywords:
          - write code
          - create a script
          - solve the problem of
          - develop an algorithm for

    # The default agent for general conversation remains the same.
    default_agent: ConversationalAgent 

# Agent configurations
agents:
  ThinkerAgent:
    default_model: "codegemma:7b-instruct-v1.1-q4_K_M"
  SynthesisThinker:
    default_model: "codegemma:7b-instruct-v1.1-q4_K_M"
  ExplorerAgent:
    default_model: "codegemma:7b-instruct-v1.1-q4_K_M" # Placeholder model
  CritiqueAgent:
    default_model: "codegemma:7b-instruct-v1.1-q4_K_M" # Placeholder model
    success_threshold: 0.8 # Example threshold
  WebSearchAgent:
    enabled: true
    api_key: "YOUR_SEARCH_API_KEY"
    max_results: 10
    
  MultiModalIngestionAgent:
    enabled: true
    supported_formats:
      - image/jpeg
      - image/png
      - video/mp4
      - application/pdf
    max_file_size: "10MB"
    
  CoherenceAgent:
    enabled: true
    model: "codegemma:7b-instruct-v1.1-q4_K_M"
    threshold: 0.8
    
  SafetyAgent:
    enabled: true
    model: "content-filter-safe"
    threshold: 0.9
  
  ExtractorAgent:
    enabled: true
    supported_types:
      - text
      - pdf
      - docx
      - html
    max_file_size: "50MB"

  ArchivistAgent:
    enabled: true
    neo4j_uri: "bolt://localhost:7688"
    neo4j_user: "neo4j"
    neo4j_password: "password"

  QLearningGraphAgent:
    enabled: true
    learning_rate: 0.1
    discount_factor: 0.9
    epsilon: 0.1
    max_episodes: 1000
    q_table_path: "./data/q_table.npy"

# Cache configuration
cache:
  redis_url: "redis://redis:6379"
  default_ttl: 3600
  max_size: 10000

# Logging configuration
logging:
  level: INFO
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"